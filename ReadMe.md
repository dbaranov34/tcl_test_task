# Решение тестового задания для Gurtam

```parcer.tcl``` содержит функцию ```parser_fn``` принимающую на вход windows-style терминированную строку (``` #TP#DATA\r\n```). Функция выводит результат парсинга валидной строки вида описанного в тестовом задании 1.


```bitswapper.tcl``` содержит функцию ```bitswapper_fn``` которая из входной строки содержащей 32битное число в hex формате выодит значения дополнительных параметров, описанных в тестовом задании 2.

Для демонстрации запустите
``` tclsh.exe .\main.tcl```




## Текст тестового задания
 ---
### 1
Разработайте программу, которая будет парсировать строки такого формата:
- ``` #TP#DATA\r\n``` где
- ``` # ``` – символ разделитель
- ``` TP ``` – тип пакета
- ``` DATA ``` – поле данных пакета
- ``` \r\n ```– признак конца пакета (символы перевода строки и возврата каретки)

Содержимое поля DATA зависит от типа пакета. Программа должна корректно
обрабатывать любые входящие строки данного формата, корректно разбирать их на
составляющие, подготавливать их к записи в базу данных (приводить к соответствующим
типам данных) и просто выводить составляющие на экран.
Описание доступных типов пакетов:
1. Пакет “SD”. Поле DATA содержит следующие поля:
```#SD#date;time;lat1;lat2;lon1;lon2;speed;course;height;sats\r\n```
- Пример пакета:
  - ```#SD#04012011;135515;5544.6025;N;03739.6834;E;35;215;110;7```
  - Описание полей:
    - date - дата в формате DDMMYYYY, в UTC
    - time - время в формате HHMMSS, в UTC
    - lat1;lat2 - широта (5544.6025;N) – приводить к одному дробному числу
    - lon1;lon2 - долгота (03739.6834;E) – приводить к одному дробному числу
      - Примечание: Формат широты и долготы такой же, как и в RMC строке протокола
NMEA (http://ru.wikipedia.org/wiki/NMEA#RMC-.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B0)
    - speed - скорость, целое число, км/ч
    - course - курс, целое число, градусы
    - height - высота, целое число, в метрах
    - sats - количество спутников, целое число
2. Пакет “M”. Поле DATA содержит одно текстовое поле с сообщением.
- Пример пакета: #M#груз доставлен
---
### 2
 
Разработайте программу, которая из исходного значения ```0x5FABFF01``` выведет на
экран значения дополнительных параметров. 
- Первый дополнительный параметр
содержится во втором байте исходного значения, 
- второй дополнительный параметр
является инверсным значением 7-го бита исходного значения. 
- Третий дополнительный
параметр является зеркальным отображением 17-20 го бита(20 бит исходного значения
является 1 битом третьего дополнительного параметра, 17 бит исходного значения
является 4 битом третьего дополнительного параметра).

---
Примечание:
Выполнять тестовое задание можно на любом языке программирования, но будущая
работа будет состоять в написании скриптов на TCL, потому выполнение задания на этом
языке будет дополнительным преимуществом. Неплохой справочник по TCL можно найти
тут: http://tclstudy.narod.ru/tcl/index.html
